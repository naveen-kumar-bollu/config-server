# Server Configuration
server.port=8888

# Config Server Configuration
spring.application.name=config-server
# Default Git repository (production)
spring.cloud.config.server.git.uri=https://github.com/naveen-kumar-bollu/config-server-repo
spring.cloud.config.server.git.default-label=main

# SSH Configuration (only for non-test profiles)
spring.cloud.config.server.git.ignore-local-ssh-settings=true
spring.cloud.config.server.git.host-key-algorithm=ssh-rsa
spring.cloud.config.server.git.strict-host-key-checking=no

# Test profile overrides - uses local file system instead of Git
---
spring.config.activate.on-profile: test
spring.cloud.config.server.git.uri=file:./config-repo
spring.cloud.config.server.git.clone-on-start=false
spring.cloud.config.server.git.ignore-local-ssh-settings=false

# Encryption Configuration (only when not in test profile)
# Decode Base64 keystore from env var and use temp file
encrypt.key-store.location=file:${KEYSTORE_TEMP_PATH:/tmp/server.jks}
encrypt.key-store.password=${KEYSTORE_PASSWORD:config-server}
encrypt.key-store.alias=${KEYSTORE_ALIAS:config-server-key}
encrypt.key-store.secret=${KEYSTORE_PASSWORD:config-server}

# Actuator endpoints for monitoring
management.endpoints.web.exposure.include=health,info,encrypt
management.endpoint.health.show-details=when-authorized

# Logging
logging.level.org.springframework.cloud.config=DEBUG
logging.level.org.springframework.security=DEBUG